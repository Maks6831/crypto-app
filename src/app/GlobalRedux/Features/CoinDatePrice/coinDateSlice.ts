import { DatePriceObj, DatePriceType } from "@/app/types/DatePriceTypes";
import { createAsyncThunk, createSlice, isRejectedWithValue } from "@reduxjs/toolkit";
import { reject } from "lodash";



export interface DatePriceAttributes {
  id:string;
  date:string;
  amount:number;
  uid: string;
}

interface MyKnownError {
  errorMessage: string
}

export const coinDatePrice = createAsyncThunk<
DatePriceObj,
DatePriceAttributes,
{
  rejectValue: MyKnownError,
}
>(
    'coinDatePrice',
    async ({id, date, amount, uid} ,thunkApi) => {
        const url = `https://api.coingecko.com/api/v3/coins/${id}/history?date=${date}&x_cg_demo_api_key=${process.env.NEXT_PUBLIC_API_KEY}`;
        const response = await fetch(url);
        const json: DatePriceType  = await response.json();
        if(json.hasOwnProperty('error')){
          return thunkApi.rejectWithValue({errorMessage: 'The beta version of Coin Flow restricts querying historical data to within the past 365 days. Please adjust the date accordingly.' } as MyKnownError) 
        } else {
          const refactoredObj :DatePriceObj = Object.assign({}, json, {
            id: id,
            amount:amount,
            date: date,
            uid: uid
          }); 
          return refactoredObj;
          
        }
      }
    );

    const storedData = typeof window !== 'undefined' ? window.localStorage.getItem('dataCoinPrices') : null;
    const dataPrices = storedData !== null ? JSON.parse(storedData) : [
      {
          "id": "bitcoin",
          "symbol": "btc",
          "name": "Bitcoin",
          "localization": {
              "en": "Bitcoin",
              "de": "Bitcoin",
              "es": "Bitcoin",
              "fr": "Bitcoin",
              "it": "Bitcoin",
              "pl": "Bitcoin",
              "ro": "Bitcoin",
              "hu": "Bitcoin",
              "nl": "Bitcoin",
              "pt": "Bitcoin",
              "sv": "Bitcoin",
              "vi": "Bitcoin",
              "tr": "Bitcoin",
              "ru": "Биткоин",
              "ja": "ビットコイン",
              "zh": "比特币",
              "zh-tw": "比特幣",
              "ko": "비트코인",
              "ar": "بيتكوين",
              "th": "บิตคอยน์",
              "id": "Bitcoin",
              "cs": "Bitcoin",
              "da": "Bitcoin",
              "el": "Bitcoin",
              "hi": "Bitcoin",
              "no": "Bitcoin",
              "sk": "Bitcoin",
              "uk": "Bitcoin",
              "he": "Bitcoin",
              "fi": "Bitcoin",
              "bg": "Bitcoin",
              "hr": "Bitcoin",
              "lt": "Bitcoin",
              "sl": "Bitcoin"
          },
          "image": {
              "thumb": "https://assets.coingecko.com/coins/images/1/thumb/bitcoin.png?1696501400",
              "small": "https://assets.coingecko.com/coins/images/1/small/bitcoin.png?1696501400"
          },
          "market_data": {
              "current_price": {
                  "aed": 152795.47193702922,
                  "ars": 34047966.24291603,
                  "aud": 63031.748855826896,
                  "bch": 176.05554792080915,
                  "bdt": 4568524.726362702,
                  "bhd": 15679.311435594242,
                  "bmd": 41600.94093254464,
                  "bnb": 132.4584937797772,
                  "brl": 205155.0402088439,
                  "btc": 1,
                  "cad": 56009.42682453146,
                  "chf": 36122.47142019697,
                  "clp": 37883896.86022182,
                  "cny": 296007.3351114284,
                  "czk": 946271.6428280338,
                  "dkk": 284675.2388014033,
                  "dot": 6062.051474282962,
                  "eos": 57844.78321251666,
                  "eth": 16.709630302685337,
                  "eur": 38150.14288219012,
                  "gbp": 32746.347058816304,
                  "gel": 110450.49817590653,
                  "hkd": 325175.83484628215,
                  "huf": 14577385.712172994,
                  "idr": 649792137.0370215,
                  "ils": 155735.202428028,
                  "inr": 3457967.9725243035,
                  "jpy": 6162486.050002279,
                  "krw": 55572824.94944445,
                  "kwd": 12805.72644067865,
                  "lkr": 13337520.088018894,
                  "ltc": 584.8143462029469,
                  "mmk": 87417707.11647438,
                  "mxn": 710768.7162088988,
                  "myr": 196106.83555601537,
                  "ngn": 37068102.408534594,
                  "nok": 436505.6521106794,
                  "nzd": 67919.90101634184,
                  "php": 2324878.859447664,
                  "pkr": 11652423.55520577,
                  "pln": 166262.73654041695,
                  "rub": 3668513.3298516567,
                  "sar": 156030.98511805816,
                  "sek": 435349.6867649865,
                  "sgd": 55778.54160235583,
                  "thb": 1475768.9182287494,
                  "try": 1256473.218985643,
                  "twd": 1306219.6241527824,
                  "uah": 1567198.010177368,
                  "usd": 41600.94093254464,
                  "vef": 4165.5022155757,
                  "vnd": 1021258047.6973822,
                  "xag": 1839.6506013262026,
                  "xau": 20.496783597464713,
                  "xdr": 31279.123473066367,
                  "xlm": 365653.2413436905,
                  "xrp": 76485.77740914671,
                  "yfi": 5.6058963283517045,
                  "zar": 785396.4361430861,
                  "bits": 1000075.0801284561,
                  "link": 2586.0959205447493,
                  "sats": 100007508.0128456
              },
              "market_cap": {
                  "aed": 2994288409374.91,
                  "ars": 667228088578225.2,
                  "aud": 1235214843928.1997,
                  "bch": 3451709772.2259135,
                  "bdt": 89528049900118.73,
                  "bhd": 307262904478.79236,
                  "bmd": 815241536115.3193,
                  "bnb": 2597596619.7627296,
                  "brl": 4020363635352.699,
                  "btc": 19602912,
                  "cad": 1097355869688.0275,
                  "chf": 707881562982.7577,
                  "clp": 742399704863417,
                  "cny": 5800769626074.944,
                  "czk": 18543810077093.52,
                  "dkk": 5578697831637.131,
                  "dot": 118851097444.55682,
                  "eos": 1133344222241.5317,
                  "eth": 327448762.0043761,
                  "eur": 747617250694.5536,
                  "gbp": 641771181094.5576,
                  "gel": 2164466278386.1711,
                  "hkd": 6372376229122.213,
                  "huf": 285668786670170,
                  "idr": 12733787459583648,
                  "ils": 3051897452524.502,
                  "inr": 67764792299515.28,
                  "jpy": 120764446213831.86,
                  "krw": 1089044482227330.6,
                  "kwd": 250950095371.627,
                  "lkr": 261371500758994.22,
                  "ltc": 11477175482.461496,
                  "mmk": 1713099373133685.2,
                  "mxn": 13928727741144.688,
                  "myr": 3843048601247.614,
                  "ngn": 726412818340195.4,
                  "nok": 8554074267857.249,
                  "nzd": 1331006539663.2847,
                  "php": 45559974610464.13,
                  "pkr": 228349154265900.5,
                  "pln": 3258202475653.847,
                  "rub": 71890788411185.42,
                  "sar": 3057693819846.2803,
                  "sek": 8531421151293.212,
                  "sgd": 1093075851623.4218,
                  "thb": 28914915876924.445,
                  "try": 24622740115291.05,
                  "twd": 25597605944177.746,
                  "uah": 30711923446288.168,
                  "usd": 815241536115.3193,
                  "vef": 81630135011.227,
                  "vnd": 20013296836841944,
                  "xag": 36051097607.92397,
                  "xau": 401669504.8440189,
                  "xdr": 612967882382.068,
                  "xlm": 7160475622231.835,
                  "xrp": 1499518103015.4038,
                  "yfi": 110311591.5951618,
                  "zar": 15391185456574.281,
                  "bits": 19603555776198.992,
                  "link": 50463599431.79809,
                  "sats": 1960355577619899
              },
              "total_volume": {
                  "aed": 89647310457.32175,
                  "ars": 19976433604505.223,
                  "aud": 36981637523.100235,
                  "bch": 103294333.01986326,
                  "bdt": 2680419447540.8027,
                  "bhd": 9199278500.890642,
                  "bmd": 24407872954.726807,
                  "bnb": 77715311.61262883,
                  "brl": 120367425476.23523,
                  "btc": 586758.4952115287,
                  "cad": 32861539752.596424,
                  "chf": 21193575757.445915,
                  "clp": 22227029506221.99,
                  "cny": 173671779222.06326,
                  "czk": 555191241377.398,
                  "dkk": 167023074629.19574,
                  "dot": 3556693163.965471,
                  "eos": 33938369856.444965,
                  "eth": 9803781.462773029,
                  "eur": 22383239893.13225,
                  "gbp": 19212754827.805058,
                  "gel": 64802902694.799965,
                  "hkd": 190785359344.27002,
                  "huf": 8552762762065.836,
                  "idr": 381242432797298.9,
                  "ils": 91372092799.66783,
                  "inr": 2028839758498.3364,
                  "jpy": 3615619580278.8394,
                  "krw": 32605379125936.594,
                  "kwd": 7513304676.542847,
                  "lkr": 7825315690992.215,
                  "ltc": 343119024.3357323,
                  "mmk": 51289231480416.69,
                  "mxn": 417018272580.6897,
                  "myr": 115058713108.58212,
                  "ngn": 21748391117579.785,
                  "nok": 256104171249.71378,
                  "nzd": 39849587003.15361,
                  "php": 1364040008819.5254,
                  "pkr": 6836645214618.987,
                  "pln": 97548749129.59053,
                  "rub": 2152369760889.0603,
                  "sar": 91545632776.3758,
                  "sek": 255425949683.9206,
                  "sgd": 32726076057.697685,
                  "thb": 865854941239.634,
                  "try": 737190986851.612,
                  "twd": 766377921330.8759,
                  "uah": 919497710143.9819,
                  "usd": 24407872954.726807,
                  "vef": 2443960318.9567976,
                  "vnd": 599186848264042.9,
                  "xag": 1079349580.843968,
                  "xau": 12025759.004793879,
                  "xdr": 18351913556.564785,
                  "xlm": 214534038416.87924,
                  "xrp": 44875310413.60451,
                  "yfi": 3289060.350861838,
                  "zar": 460803433834.8094,
                  "bits": 586758495211.5288,
                  "link": 1517299831.7452366,
                  "sats": 58675849521152.875
              }
          },
          "community_data": {
              "facebook_likes": null,
              "twitter_followers": null,
              "reddit_average_posts_48h": 0,
              "reddit_average_comments_48h": 0,
              "reddit_subscribers": null,
              "reddit_accounts_active_48h": null
          },
          "developer_data": {
              "forks": null,
              "stars": null,
              "subscribers": null,
              "total_issues": null,
              "closed_issues": null,
              "pull_requests_merged": null,
              "pull_request_contributors": null,
              "code_additions_deletions_4_weeks": {
                  "additions": null,
                  "deletions": null
              },
              "commit_count_4_weeks": null
          },
          "public_interest_stats": {
              "alexa_rank": null,
              "bing_matches": null
          },
          "amount": 0.002,
          "date": "20-01-2024",
          "uid": "3c3556ea-6a20-4ce7-bb14-3f05c15f8444"
      },
      {
          "id": "ethereum",
          "symbol": "eth",
          "name": "Ethereum",
          "localization": {
              "en": "Ethereum",
              "de": "Ethereum",
              "es": "Ethereum",
              "fr": "Ethereum",
              "it": "Ethereum",
              "pl": "Ethereum",
              "ro": "Ethereum",
              "hu": "Ethereum",
              "nl": "Ethereum",
              "pt": "Ethereum",
              "sv": "Ethereum",
              "vi": "Ethereum",
              "tr": "Ethereum",
              "ru": "Эфириум",
              "ja": "イーサリアム",
              "zh": "以太坊",
              "zh-tw": "以太幣",
              "ko": "이더리움",
              "ar": "يثريوم",
              "th": "Ethereum",
              "id": "Ethereum",
              "cs": "Ethereum",
              "da": "Ethereum",
              "el": "Ethereum",
              "hi": "Ethereum",
              "no": "Ethereum",
              "sk": "Ethereum",
              "uk": "Ethereum",
              "he": "Ethereum",
              "fi": "Ethereum",
              "bg": "Ethereum",
              "hr": "Ethereum",
              "lt": "Ethereum",
              "sl": "Ethereum"
          },
          "image": {
              "thumb": "https://assets.coingecko.com/coins/images/279/thumb/ethereum.png?1696501628",
              "small": "https://assets.coingecko.com/coins/images/279/small/ethereum.png?1696501628"
          },
          "market_data": {
              "current_price": {
                  "aed": 14246.544209169597,
                  "ars": 3298290.1624390353,
                  "aud": 5897.883884562263,
                  "bch": 8.80546251151579,
                  "bdt": 425834.5556059869,
                  "bhd": 1461.9203425053001,
                  "bmd": 3879.038366642958,
                  "bnb": 6.429977919034526,
                  "brl": 19372.697289726653,
                  "btc": 0.05430503210118573,
                  "cad": 5252.516634388796,
                  "chf": 3430.2258695456358,
                  "clp": 3653355.9144716705,
                  "cny": 27901.922971262822,
                  "czk": 89837.36873897939,
                  "dkk": 26574.128138360906,
                  "dot": 338.3211027749112,
                  "eos": 3402.868261360602,
                  "eth": 1,
                  "eur": 3564.2737983817183,
                  "gbp": 3043.4973815064327,
                  "gel": 10279.451671603834,
                  "hkd": 30345.135286492874,
                  "huf": 1410059.2171022801,
                  "idr": 60652637.01165713,
                  "ils": 14177.982206039187,
                  "inr": 321715.24255370407,
                  "jpy": 575316.0117148925,
                  "krw": 5134261.147405995,
                  "kwd": 1192.0478852612157,
                  "lkr": 1185603.3013463712,
                  "ltc": 41.24964747004031,
                  "mmk": 8147935.834150262,
                  "mxn": 64799.07601919988,
                  "myr": 18183.38024747556,
                  "ngn": 6187607.010324571,
                  "nok": 41001.78464886908,
                  "nzd": 6334.159329658617,
                  "php": 215352.561363802,
                  "pkr": 1082043.3727798292,
                  "pln": 15300.38971550404,
                  "rub": 354604.2977495018,
                  "sar": 14547.774812569618,
                  "sek": 40122.29028000015,
                  "sgd": 5183.884808567783,
                  "thb": 138869.5735258182,
                  "try": 124926.36623788135,
                  "twd": 122429.81714511027,
                  "uah": 150099.79689627778,
                  "usd": 3879.038366642958,
                  "vef": 388.4081116519595,
                  "vnd": 95814224.99976736,
                  "xag": 156.27249125392495,
                  "xau": 1.794947423396695,
                  "xdr": 2905.054502200945,
                  "xlm": 26847.147328932973,
                  "xrp": 5797.039186347763,
                  "yfi": 0.3877209240064995,
                  "zar": 72696.3442861964,
                  "bits": 54305.03210118573,
                  "link": 185.64587998970856,
                  "sats": 5430503.210118573
              },
              "market_cap": {
                  "aed": 1709706602846.1309,
                  "ars": 395822901752898.75,
                  "aud": 707796281835.5454,
                  "bch": 1057793874.4697776,
                  "bdt": 51103772307883.84,
                  "bhd": 175442888164.2503,
                  "bmd": 465517630856.3542,
                  "bnb": 771463768.2078853,
                  "brl": 2324888617540.4375,
                  "btc": 6516415.501050856,
                  "cad": 630346717037.0798,
                  "chf": 411656309931.01245,
                  "clp": 438433815093131.4,
                  "cny": 3348468318749.7583,
                  "czk": 10781249140861.55,
                  "dkk": 3189121633707.6284,
                  "dot": 40605396095.93597,
                  "eos": 408625210205.2407,
                  "eth": 120085821.831043,
                  "eur": 427743202700.51556,
                  "gbp": 365245598687.5267,
                  "gel": 1233621721769.3398,
                  "hkd": 3641674598544.6294,
                  "huf": 169219111560553.16,
                  "idr": 7278832849310640,
                  "ils": 1701478578720.7468,
                  "inr": 38608568250276.98,
                  "jpy": 69042819754067.734,
                  "krw": 616155051749777.2,
                  "kwd": 143055895550.31192,
                  "lkr": 142282490610136.62,
                  "ltc": 4952447094.778232,
                  "mmk": 977821673149832.8,
                  "mxn": 7776440833774.123,
                  "myr": 2182160446402.2483,
                  "ngn": 742565523683978,
                  "nok": 4920563254738.44,
                  "nzd": 760153049777.9604,
                  "php": 25844140915699.316,
                  "pkr": 129854417453522.39,
                  "pln": 1836177036244.2915,
                  "rub": 42555534897348.79,
                  "sar": 1745856839987.917,
                  "sek": 4815016442294.385,
                  "sgd": 622110313594.3383,
                  "thb": 16665531184657.512,
                  "try": 14992227595026.7,
                  "twd": 14692620447807.547,
                  "uah": 18013253605337.84,
                  "usd": 465517630856.3542,
                  "vef": 46612280377.64676,
                  "vnd": 11498522780229812,
                  "xag": 18754029483.73143,
                  "xau": 215408973.32616052,
                  "xdr": 348631274442.2635,
                  "xlm": 3225239502104.0464,
                  "xrp": 696087167841.7268,
                  "yfi": 46613723.164932564,
                  "zar": 8724180264634.845,
                  "bits": 6516415501050.856,
                  "link": 22274481620.264526,
                  "sats": 651641550105085.6
              },
              "total_volume": {
                  "aed": 101503218100.42053,
                  "ars": 23499528082118.31,
                  "aud": 42021011234.455246,
                  "bch": 62736813.12877215,
                  "bdt": 3033969300748.028,
                  "bhd": 10415832583.122017,
                  "bmd": 27637220056.20402,
                  "bnb": 45812053.89280101,
                  "brl": 138025832041.91437,
                  "btc": 386910.35779534397,
                  "cad": 37422924022.04456,
                  "chf": 24439538421.261112,
                  "clp": 26029286593334.07,
                  "cny": 198794523864.2757,
                  "czk": 640069752972.8892,
                  "dkk": 189334303439.03683,
                  "dot": 2410456892.4745755,
                  "eos": 24244622009.98686,
                  "eth": 7125145.408924147,
                  "eur": 25394597834.743366,
                  "gbp": 21684190493.31774,
                  "gel": 73238633148.94063,
                  "hkd": 216201826916.6757,
                  "huf": 10046334475691.314,
                  "idr": 432135523715103.1,
                  "ils": 101014730235.92717,
                  "inr": 2292144112404.4863,
                  "jpy": 4098988902598.2,
                  "krw": 36580381977422.9,
                  "kwd": 8493055909.371787,
                  "lkr": 8447139791254.252,
                  "ltc": 293893866.6278152,
                  "mmk": 58052092907532.74,
                  "mxn": 461677909345.1432,
                  "myr": 129552232735.46219,
                  "ngn": 44085219170865.48,
                  "nok": 292127903343.88165,
                  "nzd": 45129369374.17665,
                  "php": 1534335462948.6184,
                  "pkr": 7709300083503.371,
                  "pln": 109011615133.62976,
                  "rub": 2526470759880.6616,
                  "sar": 103649414061.10509,
                  "sek": 285861716440.5387,
                  "sgd": 36933938687.59016,
                  "thb": 989412478012.1062,
                  "try": 890070462882.858,
                  "twd": 872283148054.6875,
                  "uah": 1069425131982.9208,
                  "usd": 27637220056.20402,
                  "vef": 2767314844.2277093,
                  "vnd": 682653423488799.2,
                  "xag": 1113404102.0722582,
                  "xau": 12788570.836607281,
                  "xdr": 20697818109.511814,
                  "xlm": 191279499834.69327,
                  "xrp": 41302516893.17146,
                  "yfi": 2762418.7967070662,
                  "zar": 517944055824.83057,
                  "bits": 386910357795.34393,
                  "link": 1322682467.3671684,
                  "sats": 38691035779534.4
              }
          },
          "community_data": {
              "facebook_likes": null,
              "twitter_followers": 3332319,
              "reddit_average_posts_48h": 0,
              "reddit_average_comments_48h": 0,
              "reddit_subscribers": null,
              "reddit_accounts_active_48h": null
          },
          "developer_data": {
              "forks": null,
              "stars": null,
              "subscribers": null,
              "total_issues": null,
              "closed_issues": null,
              "pull_requests_merged": null,
              "pull_request_contributors": null,
              "code_additions_deletions_4_weeks": {
                  "additions": null,
                  "deletions": null
              },
              "commit_count_4_weeks": null
          },
          "public_interest_stats": {
              "alexa_rank": null,
              "bing_matches": null
          },
          "amount": 0.002,
          "date": "15-03-2024",
          "uid": "f04ce8f5-c7e6-486a-b1de-a928dbdab03d"
      },
      {
          "id": "tether",
          "symbol": "usdt",
          "name": "Tether",
          "localization": {
              "en": "Tether",
              "de": "Tether",
              "es": "Tether",
              "fr": "Tether",
              "it": "Tether",
              "pl": "Tether",
              "ro": "Tether",
              "hu": "Tether",
              "nl": "Tether",
              "pt": "Tether",
              "sv": "Tether",
              "vi": "Tether",
              "tr": "Tether",
              "ru": "Tether",
              "ja": "テザー",
              "zh": "泰达币",
              "zh-tw": "泰達幣",
              "ko": "테더",
              "ar": "Tether",
              "th": "Tether",
              "id": "Tether",
              "cs": "Tether",
              "da": "Tether",
              "el": "Tether",
              "hi": "Tether",
              "no": "Tether",
              "sk": "Tether",
              "uk": "Tether",
              "he": "Tether",
              "fi": "Tether",
              "bg": "Tether",
              "hr": "Tether",
              "lt": "Tether",
              "sl": "Tether"
          },
          "image": {
              "thumb": "https://assets.coingecko.com/coins/images/325/thumb/Tether.png?1696501661",
              "small": "https://assets.coingecko.com/coins/images/325/small/Tether.png?1696501661"
          },
          "market_data": {
              "current_price": {
                  "aed": 3.6742152427254093,
                  "ars": 842.2276888989626,
                  "aud": 1.5307562959925278,
                  "bch": 0.0031712757239453645,
                  "bdt": 109.74356756651011,
                  "bhd": 0.3770076948881238,
                  "bmd": 1.0003308583515942,
                  "bnb": 0.0024557654852230865,
                  "brl": 4.956339303874642,
                  "btc": 0.000016022534551386865,
                  "cad": 1.3582992560127132,
                  "chf": 0.8845465628208313,
                  "clp": 967.2999334088241,
                  "cny": 7.199181121384748,
                  "czk": 23.39573811512707,
                  "dkk": 6.879375345969755,
                  "dot": 0.11576512011661623,
                  "eos": 1.099979578275101,
                  "eth": 0.0002914761193026018,
                  "eur": 0.9223550679430883,
                  "gbp": 0.7903384035738529,
                  "gel": 2.650876774631719,
                  "hkd": 7.831440240405882,
                  "huf": 363.7403067138069,
                  "idr": 15707.145121293815,
                  "ils": 3.567279873967619,
                  "inr": 82.87376040679662,
                  "jpy": 150.1445953728463,
                  "krw": 1332.3406702384884,
                  "kwd": 0.30790183820062106,
                  "lkr": 310.19347815806225,
                  "ltc": 0.011775416956701699,
                  "mmk": 2099.7475322297096,
                  "mxn": 17.02152985262484,
                  "myr": 4.747070088307498,
                  "ngn": 1578.582114330317,
                  "nok": 10.523182531262991,
                  "nzd": 1.6382758579715864,
                  "php": 56.04604416861,
                  "pkr": 279.59247490927135,
                  "pln": 3.9844558544728566,
                  "rub": 91.7734729771225,
                  "sar": 3.7514948028565027,
                  "sek": 10.363172608153633,
                  "sgd": 1.3452449383112248,
                  "thb": 35.813587305342324,
                  "try": 31.400283609908954,
                  "twd": 31.58474662085079,
                  "uah": 38.162380166045615,
                  "usd": 1.0003308583515942,
                  "vef": 0.10016312884674516,
                  "vnd": 24663.157312658597,
                  "xag": 0.04323979151436833,
                  "xau": 0.00048033887156326836,
                  "xdr": 0.7534211932463872,
                  "xlm": 7.87245551325377,
                  "xrp": 1.664423856997073,
                  "yfi": 0.00011215754658282202,
                  "zar": 19.068346835132417,
                  "bits": 16.022534551386865,
                  "link": 0.04992555188401576,
                  "sats": 1602.2534551386866
              },
              "market_cap": {
                  "aed": 364635835866.472,
                  "ars": 83584215143519.61,
                  "aud": 151915052500.59036,
                  "bch": 314205547.571809,
                  "bdt": 10891152218099.291,
                  "bhd": 37414932678.69961,
                  "bmd": 99274662637.20981,
                  "bnb": 243310304.85850438,
                  "brl": 491876170968.5829,
                  "btc": 1587108.3961910012,
                  "cad": 134800100661.93524,
                  "chf": 87799702932.29993,
                  "clp": 95996613276929.16,
                  "cny": 714459892067.4717,
                  "czk": 2321835809759.061,
                  "dkk": 682721782422.3552,
                  "dot": 11477174830.204056,
                  "eos": 109070265480.69362,
                  "eth": 28877741.340201937,
                  "eur": 91536202684.63924,
                  "gbp": 78434627632.41887,
                  "gel": 263077855988.60632,
                  "hkd": 777206442587.3195,
                  "huf": 36098252828142.29,
                  "idr": 1558805788996335.5,
                  "ils": 354023374430.55414,
                  "inr": 8224543446974.211,
                  "jpy": 14900624056526.607,
                  "krw": 132223923166499.75,
                  "kwd": 30556741159.733177,
                  "lkr": 30784167697424.88,
                  "ltc": 1167696387.0994499,
                  "mmk": 208382782701433.56,
                  "mxn": 1689247731968.5002,
                  "myr": 471107911544.87976,
                  "ngn": 156661374121275.22,
                  "nok": 1044339867093.9818,
                  "nzd": 162585490339.48788,
                  "php": 5562111855828.911,
                  "pkr": 27747268207100.176,
                  "pln": 395424681187.451,
                  "rub": 9107767188010.39,
                  "sar": 372305200653.84595,
                  "sek": 1028460189882.5216,
                  "sgd": 133504566314.51967,
                  "thb": 3554205858874.4165,
                  "try": 3116221534166.43,
                  "twd": 3134527980506.0454,
                  "uah": 3787304355141.2,
                  "usd": 99274662637.20981,
                  "vef": 9940371969.86381,
                  "vnd": 2447616807320405,
                  "xag": 4291195937.0780907,
                  "xau": 47669707.50513541,
                  "xdr": 74770896207.79257,
                  "xlm": 780860557231.8212,
                  "xrp": 164946570525.2727,
                  "yfi": 11117905.564595666,
                  "zar": 1892377590177.0012,
                  "bits": 1587108396191.0012,
                  "link": 4944921709.754897,
                  "sats": 158710839619100.12
              },
              "total_volume": {
                  "aed": 238328352603.44363,
                  "ars": 54631186349170.73,
                  "aud": 99292665823.9639,
                  "bch": 205705128.58102486,
                  "bdt": 7118527886665.17,
                  "bhd": 24454643211.065487,
                  "bmd": 64886564825.33171,
                  "bnb": 159293482.77360982,
                  "brl": 321493462740.07086,
                  "btc": 1039303.364636651,
                  "cad": 88106222048.07674,
                  "chf": 57376204493.058914,
                  "clp": 62744010454799.234,
                  "cny": 466975629734.9469,
                  "czk": 1517566978134.8572,
                  "dkk": 446231394960.2891,
                  "dot": 7509116517.046372,
                  "eos": 71350289373.16061,
                  "eth": 18906628.694160435,
                  "eur": 59828657097.19717,
                  "gbp": 51265382477.503624,
                  "gel": 171949396787.12866,
                  "hkd": 507987183032.7984,
                  "huf": 23594052701787.133,
                  "idr": 1018845596559117.4,
                  "ils": 231391978823.61533,
                  "inr": 5375615059817.121,
                  "jpy": 9739144743457.633,
                  "krw": 86422415690859.31,
                  "kwd": 19972084653.23712,
                  "lkr": 20120732116637.242,
                  "ltc": 763813641.5839554,
                  "mmk": 136200341346428.9,
                  "mxn": 1104103298411.3586,
                  "myr": 307919193378.6121,
                  "ngn": 102394892488262.97,
                  "nok": 682587325766.1722,
                  "nzd": 106266933357.64958,
                  "php": 3635432464957.2295,
                  "pkr": 18135794868680.26,
                  "pln": 258452142045.2424,
                  "rub": 5952895838271.624,
                  "sar": 243341099282.45975,
                  "sek": 672208265516.4058,
                  "sgd": 87259452377.10616,
                  "thb": 2323052053142.801,
                  "try": 2036782651437.5479,
                  "twd": 2048747863764.474,
                  "uah": 2475406745537.7183,
                  "usd": 64886564825.33171,
                  "vef": 6497091735.960466,
                  "vnd": 1599778255768556.2,
                  "xag": 2804753558.9917326,
                  "xau": 31157230.69782777,
                  "xdr": 48870743802.624756,
                  "xlm": 510647642957.8863,
                  "xrp": 107963026025.04546,
                  "yfi": 7275110.8858011,
                  "zar": 1236870294163.0657,
                  "bits": 1039303364636.651,
                  "link": 3238426098.4419603,
                  "sats": 103930336463665.1
              }
          },
          "community_data": {
              "facebook_likes": null,
              "twitter_followers": 396582,
              "reddit_average_posts_48h": 0,
              "reddit_average_comments_48h": 0,
              "reddit_subscribers": null,
              "reddit_accounts_active_48h": null
          },
          "developer_data": {
              "forks": null,
              "stars": null,
              "subscribers": null,
              "total_issues": null,
              "closed_issues": null,
              "pull_requests_merged": null,
              "pull_request_contributors": null,
              "code_additions_deletions_4_weeks": {
                  "additions": null,
                  "deletions": null
              },
              "commit_count_4_weeks": null
          },
          "public_interest_stats": {
              "alexa_rank": null,
              "bing_matches": null
          },
          "amount": 0.012,
          "date": "02-03-2024",
          "uid": "bd751abf-dbfa-4d98-ae31-994bb557f95d"
      }
  ];

    const initialState : {data: DatePriceObj[], loading: boolean, error: string}  = {
        data : dataPrices,
        loading:false,
        error:''
    }

    const coinDatePriceSlice = createSlice({
    name: 'coinDatePriceSlice',
    initialState,
    reducers: {
      deleteCoin: (state, action) => {
        const uuid = action.payload;
        const coinToDeleteIndex = state.data.findIndex(obj => obj.uid === uuid)
       state.data.splice(coinToDeleteIndex, 1);
      }
    },
    extraReducers:builder => {
        builder
      .addCase(coinDatePrice.pending, (state, action) => {
        state.loading = true;
        state.error = "";
      })
      .addCase(coinDatePrice.fulfilled, (state, action) => {
        state.loading = false;
        state.error='';
        if(typeof action.payload !== 'boolean'){
          const indexIfObjectIsEdit = state.data.findIndex(obj => obj.uid === action.payload.uid) 
          indexIfObjectIsEdit === -1 ? state.data.unshift(action.payload): state.data[indexIfObjectIsEdit] = action.payload;
        }
      })
      .addCase(coinDatePrice.rejected, (state, action) => {
        state.loading = false;
        if (action.payload) {
          state.error = action.payload.errorMessage
        } else {
          state.error = action.error.message ?? "An unkown error occurrfetchDatePrice"
        }
    })
    }
    })
    
    export const { deleteCoin } = coinDatePriceSlice.actions;
    export default coinDatePriceSlice.reducer;
